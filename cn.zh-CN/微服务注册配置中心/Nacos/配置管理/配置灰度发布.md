---
keyword: [灰度发布, 配置, 专业版]
---

# 配置灰度发布

MSE注册配置中心支持灰度发布，即在配置正式发布前先进行小部分的发布验证，降低配置推送的风险。本文介绍如何在MSE上为Nacos实例配置灰度发布。

-   [开通MSE](https://www.aliyun.com/product/mse)
-   [创建Nacos引擎](/cn.zh-CN/快速入门/微服务注册配置中心/创建Nacos引擎.md)

**说明：** 灰度发布仅支持MSE专业版Nacos 2.x及以上版本，对Nacos Client版本无限制。

在使用配置中心对集群配置进行集中管理时，如果对某个配置进行了修改，一般情况下新的配置将会覆盖旧的配置，同时会全量的推送到集群中。这种情况下，由于是全量推送，一旦配置出错，可能会导致整个集群都无法运行，风险极大。

因此，在需要对配置进行编辑时，推荐先进行Beta发布。Beta发布是指在修改配置之后，首先在指定的一小部分的机器（一般是流量比较低、或者影响较小的机器）上进行Beta配置推送，其他机器依旧使用原本的配置。然后对这一部分集群进行验证测试，运行一段时间后，确定这一部分集群运行没有问题，配置稳定之后，再正式发布进行全量推送。如果配置在验证测试阶段未通过，则可以停止灰度发布，恢复到原本的配置。Beta发布的整个过程如下图所示：

![Beta发布流程](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9318616261/p294428.png)

这种通过在小部分机器上验证待发布的配置的方式，可以大大降低配置推送的风险，减少因为配置出错导致的故障。

## 创建Beta配置

1.  登录[MSE管理控制台](https://mse.console.aliyun.com)。

2.  在左侧导航栏选择**注册配置中心** \> **实例列表**。

3.  在实例列表页面顶部菜单栏选择地域，然后单击具体实例名称。

4.  在实例**基础详情**页面左侧菜单栏选择**配置管理** \> **配置列表**，在目标配置的**操作**列单击**编辑**。

5.  在**编辑配置**面板中打开**Beta发布开关**。

    ![Beta发布](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9318616261/p294404.png)

6.  单击IP地址输入框，在IP地址列表中选择待灰度推送的IP地址。

    您也可以选择手动输入IP地址，手动输入支持IP地址补全。

    **说明：** IP地址指订阅了该配置的机器IP，多个IP用英文逗号（,）分隔。

7.  修改完配置后，单击**发布**。

8.  在**配置内容对比**对话框中确认**历史版本**和**当前配置**，然后单击**发布**。


## 查看Beta配置

1.  登录[MSE管理控制台](https://mse.console.aliyun.com)。

2.  在左侧导航栏选择**注册配置中心** \> **实例列表**。

3.  在实例列表页面顶部菜单栏选择地域，然后单击具体实例名称。

4.  在实例**基础详情**页面左侧菜单栏选择**配置管理** \> **配置列表**，在正在Beta发布的目标配置的**操作**列单击**编辑**。

5.  在**编辑配置**面板中单击**BETA**页签，查看BETA发布信息。


## 其他操作

-   **停止Beta发布**：在**编辑配置**的**BETA**页签中，单击**停止Beta**，即可取消Beta发布。
-   **发布正式**：在**编辑配置**的**BETA**页签中，单击**发布正式**，在弹出的**配置内容对比**对话框中确认配置信息，单击**发布正式**，Beta发布将改为正式发布。

