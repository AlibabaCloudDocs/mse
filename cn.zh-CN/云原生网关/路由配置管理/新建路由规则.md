---
keyword: [服务网关, 云原生网关, 限流]
---

# 新建路由规则

网关收到访问流量时，根据配置的路由规则判断是否匹配并决定接下来的处理动作。本文介绍如何为云原生网关配置路由规则。

## 创建路由

1.  登录[MSE网关管理控制台](https://mse.console.aliyun.com/#/microgw)。

2.  在左侧导航栏选择**云原生网关** \> **网关列表**。

3.  在顶部菜单栏选择地域。

4.  在**网关列表**页面，单击目标网关名称或**操作**列下的**管理**。

5.  在**网关详情**页面左侧导航栏单击**路由配置**。

6.  在**路由配置**页面左上角单击**创建路由**。

7.  在**创建路由**面板中配置路由相关参数，然后单击**确定**。

    ![Ingress网关创建路由配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0498234261/p275398.png)

    参数说明如下：

    **说明：**

    -   匹配规则之间是“与”关系，即填写的规则越多匹配的范围越小。
    -   路由之间匹配的优先级与路由配置页面展示排列顺序一致。
    |参数|描述|
    |--|--|
    |**路由名称**|自定义路由名称。|
    |**关联域名**|选择在**域名管理**中创建的域名。|
    |**匹配规则**|
    |**路径（Path）**|设置匹配HTTP请求中的Path参数，相同匹配规则时Path越长优先级越高。包括**前缀匹配**、**精确匹配**和**正则匹配**。    -   前缀匹配：以前缀作为匹配条件，例如Path以/user开头。
    -   精确匹配：即完全匹配，例如Path等于/user。
    -   正则匹配：以正则表达式作为匹配条件。 |
    |**方法（Method）**|设置匹配HTTP请求中的Method参数，不填表示匹配所有参数。|
    |**请求头（Header）**|设置匹配HTTP请求中的Header参数，相同匹配规则时参数越多优先级越高。单击**添加请求头**进行添加。|
    |**请求参数（Query）**|设置匹配HTTP请求中的Query参数，相同匹配规则时参数越多优先级越高。单击**添加请求参数**进行添加。|
    |**目标服务**|选择当前路由的目标服务。|


## 配置限流

1.  登录[MSE网关管理控制台](https://mse.console.aliyun.com/#/microgw)。

2.  在左侧导航栏选择**云原生网关** \> **网关列表**。

3.  在顶部菜单栏选择地域。

4.  在**网关列表**页面，单击目标网关名称或**操作**列下的**管理**。

5.  在**网关详情**页面左侧导航栏单击**路由配置**。

6.  在**路由配置**页面单击目标路由名称。

7.  在**路由配置**详情页面的**策略配置**区域，单击限流阈值右侧的![编辑](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7635136261/p294857.png)。

8.  在**修改时间窗口**对话框中设置**时间窗口**和**限制请求次数**，然后单击**确认**。

    ![限流配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7635136261/p294859.png)

    限流配置参数说明如下：

    -   **时间窗口**：设置时间周期。默认设置为1秒，由周期数量和时间单位组成。
    -   **限制请求次数**：设置网关允许的请求次数。
    **说明：** 限流配置是指一个时间窗口内网关允许的请求次数。例如，当配置限流设置为1秒50次请求和2秒100次请求，两个配置平均看起来都是1秒50次请求，区别在于2秒100次请求配置可以在周期的前一秒就请求100次，或者100次都在周期的后1秒请求，弹性相比于1秒50次请求更高，同时对系统峰值的要求也不一样。


## 结果验证

返回**路由配置**页面会查看路由信息。如果包含新建路由的**路由名称**、**路由条件**和**目标服务**等信息，则表明路由新建成功。

